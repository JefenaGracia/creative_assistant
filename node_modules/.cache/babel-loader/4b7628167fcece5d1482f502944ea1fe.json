{"ast":null,"code":"var _jsxFileName = \"/Users/jefenaprakash/creative_assistant/ca_login/src/components/ManageClassroom.js\";\nimport React, { useState, useEffect } from 'react';\nimport { db } from '../firebaseConfig';\nimport { collection, doc, getDocs, setDoc, deleteDoc } from 'firebase/firestore';\nimport * as XLSX from 'xlsx';\n//import { useNavigate, useParams } from 'react-router-dom';\nimport './ManageClassroom.css';\nconst ManageClassroom = () => {\n  const [students, setStudents] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const {\n    classroomId\n  } = useParams();\n  //const navigate = useNavigate();\n\n  // Fetching the list of students from the classroom\n  useEffect(() => {\n    const fetchClassroomStudents = async () => {\n      try {\n        const classroomRef = doc(db, 'classrooms', classroomId);\n        const studentsCollection = collection(classroomRef, 'students');\n        const querySnapshot = await getDocs(studentsCollection);\n        setStudents(querySnapshot.docs.map(doc => doc.data()));\n        setLoading(false);\n      } catch (error) {\n        console.error('Error fetching students:', error);\n        setLoading(false);\n      }\n    };\n    fetchClassroomStudents();\n  }, [classroomId]);\n\n  // Handle removing a student from the classroom\n  const handleStudentRemove = async email => {\n    try {\n      const classroomRef = doc(db, 'classrooms', classroomId);\n      const studentRef = doc(classroomRef, 'students', email);\n      await deleteDoc(studentRef);\n      setStudents(students.filter(student => student.email !== email));\n    } catch (error) {\n      console.error('Error removing student:', error);\n    }\n  };\n\n  // Handle file upload to add students\n  const handleFileUpload = e => {\n    const file = e.target.files[0];\n    const reader = new FileReader();\n    reader.onload = async event => {\n      try {\n        const fileData = event.target.result;\n        const workbook = XLSX.read(fileData, {\n          type: 'array'\n        });\n        const sheet = workbook.Sheets[workbook.SheetNames[0]];\n        const jsonData = XLSX.utils.sheet_to_json(sheet);\n        const newStudents = await processStudents(jsonData);\n        setStudents(prevStudents => [...prevStudents, ...newStudents]);\n      } catch (error) {\n        console.error('Error reading file:', error);\n      }\n    };\n    reader.readAsArrayBuffer(file);\n  };\n\n  // Refactor student processing\n  const processStudents = async jsonData => {\n    const classroomRef = doc(db, 'classrooms', classroomId);\n    const newStudents = [];\n    for (const row of jsonData) {\n      const {\n        'Student Email': email,\n        'First name': firstName,\n        'Last name': lastName\n      } = row;\n      if (email && firstName && lastName) {\n        const studentRef = doc(collection(classroomRef, 'students'), email);\n        await setDoc(studentRef, {\n          email,\n          firstName,\n          lastName\n        });\n        newStudents.push({\n          email,\n          firstName,\n          lastName\n        });\n      }\n    }\n    return newStudents;\n  };\n  if (loading) return /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 23\n    }\n  }, \"Loading students...\");\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"manage-classroom\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 7\n    }\n  }, \"Manage Students\"), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"file\",\n    accept: \".xlsx,.csv\",\n    onChange: handleFileUpload,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"student-list\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 7\n    }\n  }, students.length > 0 ? students.map(student => /*#__PURE__*/React.createElement(\"div\", {\n    key: student.email,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 15\n    }\n  }, student.lastName, \", \", student.firstName), /*#__PURE__*/React.createElement(\"button\", {\n    onClick: () => handleStudentRemove(student.email),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 15\n    }\n  }, \"Remove\"))) : /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 11\n    }\n  }, \"No students in this classroom yet.\")));\n};\nexport default ManageClassroom;","map":{"version":3,"names":["React","useState","useEffect","db","collection","doc","getDocs","setDoc","deleteDoc","XLSX","ManageClassroom","students","setStudents","loading","setLoading","classroomId","useParams","fetchClassroomStudents","classroomRef","studentsCollection","querySnapshot","docs","map","data","error","console","handleStudentRemove","email","studentRef","filter","student","handleFileUpload","e","file","target","files","reader","FileReader","onload","event","fileData","result","workbook","read","type","sheet","Sheets","SheetNames","jsonData","utils","sheet_to_json","newStudents","processStudents","prevStudents","readAsArrayBuffer","row","firstName","lastName","push","createElement","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","className","accept","onChange","length","key","onClick"],"sources":["/Users/jefenaprakash/creative_assistant/ca_login/src/components/ManageClassroom.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { db } from '../firebaseConfig';\nimport { collection, doc, getDocs, setDoc, deleteDoc } from 'firebase/firestore';\nimport * as XLSX from 'xlsx';\n//import { useNavigate, useParams } from 'react-router-dom';\nimport './ManageClassroom.css';\n\nconst ManageClassroom = () => {\n  const [students, setStudents] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const { classroomId } = useParams();\n  //const navigate = useNavigate();\n\n  // Fetching the list of students from the classroom\n  useEffect(() => {\n    const fetchClassroomStudents = async () => {\n      try {\n        const classroomRef = doc(db, 'classrooms', classroomId);\n        const studentsCollection = collection(classroomRef, 'students');\n        const querySnapshot = await getDocs(studentsCollection);\n        setStudents(querySnapshot.docs.map(doc => doc.data()));\n        setLoading(false);\n      } catch (error) {\n        console.error('Error fetching students:', error);\n        setLoading(false);\n      }\n    };\n\n    fetchClassroomStudents();\n  }, [classroomId]);\n\n  // Handle removing a student from the classroom\n  const handleStudentRemove = async (email) => {\n    try {\n      const classroomRef = doc(db, 'classrooms', classroomId);\n      const studentRef = doc(classroomRef, 'students', email);\n      await deleteDoc(studentRef);\n      setStudents(students.filter(student => student.email !== email));\n    } catch (error) {\n      console.error('Error removing student:', error);\n    }\n  };\n\n  // Handle file upload to add students\n  const handleFileUpload = (e) => {\n    const file = e.target.files[0];\n    const reader = new FileReader();\n\n    reader.onload = async (event) => {\n      try {\n        const fileData = event.target.result;\n        const workbook = XLSX.read(fileData, { type: 'array' });\n        const sheet = workbook.Sheets[workbook.SheetNames[0]];\n        const jsonData = XLSX.utils.sheet_to_json(sheet);\n\n        const newStudents = await processStudents(jsonData);\n        setStudents((prevStudents) => [...prevStudents, ...newStudents]);\n      } catch (error) {\n        console.error('Error reading file:', error);\n      }\n    };\n\n    reader.readAsArrayBuffer(file);\n  };\n\n  // Refactor student processing\n  const processStudents = async (jsonData) => {\n    const classroomRef = doc(db, 'classrooms', classroomId);\n    const newStudents = [];\n\n    for (const row of jsonData) {\n      const { 'Student Email': email, 'First name': firstName, 'Last name': lastName } = row;\n\n      if (email && firstName && lastName) {\n        const studentRef = doc(collection(classroomRef, 'students'), email);\n        await setDoc(studentRef, { email, firstName, lastName });\n        newStudents.push({ email, firstName, lastName });\n      }\n    }\n    return newStudents;\n  };\n\n  if (loading) return <p>Loading students...</p>;\n\n  return (\n    <div className=\"manage-classroom\">\n      <h2>Manage Students</h2>\n      {/* File upload for adding students */}\n      <input type=\"file\" accept=\".xlsx,.csv\" onChange={handleFileUpload} />\n\n      {/* List of students */}\n      <div className=\"student-list\">\n        {students.length > 0 ? (\n          students.map((student) => (\n            <div key={student.email}>\n              <p>{student.lastName}, {student.firstName}</p>\n              <button onClick={() => handleStudentRemove(student.email)}>Remove</button>\n            </div>\n          ))\n        ) : (\n          <p>No students in this classroom yet.</p>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default ManageClassroom;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}