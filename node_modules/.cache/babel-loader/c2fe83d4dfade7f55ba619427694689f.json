{"ast":null,"code":"var _jsxFileName = \"/Users/jefenaprakash/creative_assistant/ca_login/src/components/TeacherDashboard.js\";\nimport React, { useState } from 'react';\nimport * as XLSX from 'xlsx';\nimport { db } from '../firebaseConfig';\nimport { getDoc, doc, setDoc, collection } from 'firebase/firestore';\nimport './TeacherDashboard.css';\nconst TeacherDashboard = () => {\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(null);\n  const handleFileUpload = e => {\n    const file = e.target.files[0];\n    if (!file) {\n      alert(\"No file selected\");\n      return;\n    }\n    setLoading(true);\n    const reader = new FileReader();\n    reader.onload = async event => {\n      try {\n        const fileData = event.target.result;\n        const workbook = XLSX.read(fileData, {\n          type: 'binary'\n        });\n        const sheet = workbook.Sheets[workbook.SheetNames[0]];\n        const jsonData = XLSX.utils.sheet_to_json(sheet);\n        console.log(\"Loaded JSON data:\", jsonData);\n        for (const row of jsonData) {\n          const {\n            'Student Email': email,\n            'Project Name': projectName,\n            'Team Name': teamName\n          } = row;\n          if (!email || !projectName || !teamName) {\n            setError(\"Missing required fields in the file.\");\n            setLoading(false);\n            return;\n          }\n          console.log(`Processing row - Email: ${email}, Project: ${projectName}, Team: ${teamName}`);\n          const studentRef = doc(db, \"users\", email);\n          const docSnap = await getDoc(studentRef);\n          if (docSnap.exists()) {\n            const projectRef = doc(collection(db, \"projects\"), `${email}-${projectName}`);\n            await setDoc(projectRef, {\n              projectName,\n              teamName,\n              email,\n              assignedAt: new Date().toISOString()\n            });\n            console.log(`Project assigned to ${email} for ${projectName}`);\n          } else {\n            console.log(`Student with email ${email} not found in users collection`);\n          }\n        }\n        alert('File uploaded and students assigned successfully.');\n        setLoading(false);\n      } catch (err) {\n        console.error(err);\n        setError(\"An error occurred while processing the file.\");\n        setLoading(false);\n      }\n    };\n    reader.readAsBinaryString(file);\n  };\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"teacher-dashboard\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 7\n    }\n  }, \"Teacher Dashboard\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"upload-section\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    type: \"file\",\n    accept: \".xlsx,.csv\",\n    onChange: handleFileUpload,\n    id: \"file-upload\",\n    hidden: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"file-upload\",\n    className: \"upload-button\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 9\n    }\n  }, \"Select File\"), /*#__PURE__*/React.createElement(\"p\", {\n    className: \"upload-instructions\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 9\n    }\n  }, \"Upload an Excel file to assign projects to students.\")), loading && /*#__PURE__*/React.createElement(\"p\", {\n    className: \"loading\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 19\n    }\n  }, \"Uploading...\"), error && /*#__PURE__*/React.createElement(\"p\", {\n    className: \"error\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 17\n    }\n  }, error));\n};\nexport default TeacherDashboard;","map":{"version":3,"names":["React","useState","XLSX","db","getDoc","doc","setDoc","collection","TeacherDashboard","loading","setLoading","error","setError","handleFileUpload","e","file","target","files","alert","reader","FileReader","onload","event","fileData","result","workbook","read","type","sheet","Sheets","SheetNames","jsonData","utils","sheet_to_json","console","log","row","email","projectName","teamName","studentRef","docSnap","exists","projectRef","assignedAt","Date","toISOString","err","readAsBinaryString","createElement","className","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","accept","onChange","id","hidden","htmlFor"],"sources":["/Users/jefenaprakash/creative_assistant/ca_login/src/components/TeacherDashboard.js"],"sourcesContent":["import React, { useState } from 'react';\nimport * as XLSX from 'xlsx';\nimport { db } from '../firebaseConfig';\nimport { getDoc, doc, setDoc, collection } from 'firebase/firestore';\nimport './TeacherDashboard.css';\n\nconst TeacherDashboard = () => {\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(null);\n\n  const handleFileUpload = (e) => {\n    const file = e.target.files[0];\n    if (!file) {\n      alert(\"No file selected\");\n      return;\n    }\n\n    setLoading(true);\n    const reader = new FileReader();\n\n    reader.onload = async (event) => {\n      try {\n        const fileData = event.target.result;\n        const workbook = XLSX.read(fileData, { type: 'binary' });\n        const sheet = workbook.Sheets[workbook.SheetNames[0]];\n        const jsonData = XLSX.utils.sheet_to_json(sheet);\n\n        console.log(\"Loaded JSON data:\", jsonData);\n\n        for (const row of jsonData) {\n          const { 'Student Email': email, 'Project Name': projectName, 'Team Name': teamName } = row;\n\n          if (!email || !projectName || !teamName) {\n            setError(\"Missing required fields in the file.\");\n            setLoading(false);\n            return;\n          }\n\n          console.log(`Processing row - Email: ${email}, Project: ${projectName}, Team: ${teamName}`);\n\n          const studentRef = doc(db, \"users\", email);\n          const docSnap = await getDoc(studentRef);\n\n          if (docSnap.exists()) {\n            const projectRef = doc(collection(db, \"projects\"), `${email}-${projectName}`);\n            await setDoc(projectRef, {\n              projectName,\n              teamName,\n              email,\n              assignedAt: new Date().toISOString()\n            });\n            console.log(`Project assigned to ${email} for ${projectName}`);\n          } else {\n            console.log(`Student with email ${email} not found in users collection`);\n          }\n        }\n\n        alert('File uploaded and students assigned successfully.');\n        setLoading(false);\n      } catch (err) {\n        console.error(err);\n        setError(\"An error occurred while processing the file.\");\n        setLoading(false);\n      }\n    };\n\n    reader.readAsBinaryString(file);\n  };\n\n  return (\n    <div className=\"teacher-dashboard\">\n      <h1>Teacher Dashboard</h1>\n\n      <div className=\"upload-section\">\n        <input type=\"file\" accept=\".xlsx,.csv\" onChange={handleFileUpload} id=\"file-upload\" hidden />\n        <label htmlFor=\"file-upload\" className=\"upload-button\">\n          Select File\n        </label>\n        <p className=\"upload-instructions\">Upload an Excel file to assign projects to students.</p>\n      </div>\n\n      {loading && <p className=\"loading\">Uploading...</p>}\n      {error && <p className=\"error\">{error}</p>}\n    </div>\n  );\n};\n\nexport default TeacherDashboard;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}